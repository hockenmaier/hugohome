

<!doctype html>






<html  data-bs-theme="dark"  data-paige="Paige theme from https://github.com/willfaught/paige"   lang="en-us" >

    










    

    

    




<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    

    

<meta charset="utf-8">






    <meta content="AI, Analytics, AWS Lambda, Data Visualization, NLP, project overview, Python, Rapid Prototyping, React, Serverless, System Design" name="keywords">


<meta content="#0d1213" name="msapplication-TileColor">


    <meta content="/browserconfig.xml" name="msapplication-config">


<meta content="https://github.com/willfaught/paige" name="theme">
<meta content="#0d1213" name="theme-color">
<meta content="width=device-width, initial-scale=1" name="viewport">

<meta property="og:url" content="http://localhost:1313/answering-machine/">
  <meta property="og:site_name" content="HockenHome">
  <meta property="og:title" content="The Answering Machine">
  <meta property="og:description" content="The Answering Machine is a proof-of-concept system that I built using pre-LLM natural language processing (NLP), specifically NLTK, to produce answers to questions asked about data in plain English.
Looking back, this project was a great insight into what LLMs immediately allowed that was incredibly difficult before. This project was several months of work that the openAI sdk would probably have allowed in a few weeks - and that few weeks would have been mostly frontend design and a bit of prompting.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2019-07-03T00:00:00+00:00">
    <meta property="article:modified_time" content="2019-07-03T00:00:00+00:00">
    <meta property="article:tag" content="AI">
    <meta property="article:tag" content="NLP">
    <meta property="article:tag" content="Analytics">
    <meta property="article:tag" content="Data Visualization">
    <meta property="article:tag" content="Serverless">
    <meta property="article:tag" content="Python">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="The Answering Machine">
  <meta name="twitter:description" content="The Answering Machine is a proof-of-concept system that I built using pre-LLM natural language processing (NLP), specifically NLTK, to produce answers to questions asked about data in plain English.
Looking back, this project was a great insight into what LLMs immediately allowed that was incredibly difficult before. This project was several months of work that the openAI sdk would probably have allowed in a few weeks - and that few weeks would have been mostly frontend design and a bit of prompting.">



    
        <title>The Answering Machine Â· Home</title>
    

    


    <link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">



    <link href="/favicon.ico" rel="shortcut icon">



    <link href="/favicon.png" rel="icon" type="image/png">



    <link href="/favicon.svg" rel="icon" type="image/svg+xml">



    <link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">



    <link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">



    <link color="#0d1213" href="/safari-pinned-tab.svg" rel="mask-icon">



    <link href="/site.webmanifest" rel="manifest">
























    

    
        
        
        
    

    
        
    

    
    
    


<link  crossorigin="anonymous"  href="/css/paige/bootstrap/14cce8f10c43f734971f8d33cd5a57c329fab6fd-paige.min.d48aec4dfdd56584d47efc388224a845a56c407947408528bf4c65a621fb3ed0.css"  integrity="sha256-1IrsTf3VZYTUfvw4giSoRaVsQHlHQIUov0xlpiH7PtA="   referrerpolicy="no-referrer"  rel="stylesheet">



















    

    

    

    
    
    


<link  crossorigin="anonymous"  href="/css/paige/bootstrap-icons/bootstrap-icons.min.540116b7267d4b2410c74086ae6497566928c6d5715900be7ce7279ad45addcd.css"  integrity="sha256-VAEWtyZ9SyQQx0CGrmSXVmkoxtVxWQC&#43;fOcnmtRa3c0="   referrerpolicy="no-referrer"  rel="stylesheet">






    

<style>


.paige-figure-numbered {
    counter-increment: paige-figure-numbered;
}

.paige-figure-numbered > div > figure > figcaption::before {
    content: "Figure " counter(paige-figure-numbered) ": ";
}

.paige-figure-numbered > div > figure > figcaption:empty::before {
    content: "Figure " counter(paige-figure-numbered);
}

.paige-header-link {
    opacity: 0;
    margin-left: 0.5rem;
    position: absolute;
    transition: color 0.15s ease-in-out, opacity 0.15s ease-in-out;
}

.paige-header-link::after {
    content: "#";
}

.paige-quote .blockquote-footer {
    margin-top: 0;
}

.paige-quote blockquote {
    border-left: 0;
    border-right: 0;
    margin-bottom: 0;
    padding: 0;
}

blockquote {
    padding: 0.5rem 1rem;
    border-left: 0.25rem solid var(--bs-border-color);
    border-right: 0.25rem solid var(--bs-body-bg);
}

td,
th {
    padding: 0.25rem;
}

.highlight .chroma .hl,
.highlight .chroma .lnt {
    display: flex;
}

.paige-row-narrow:not(:last-child),
.paige-figure .paige-quote,
.paige-figure .paige-video,
.paige-figure .highlight pre.chroma,
.paige-figure .highlight .chroma pre,
.paige-figure .paige-quote blockquote,
.paige-figure figure > div > :last-child,
.paige-gallery .paige-figure,
.paige-gallery .paige-image,
blockquote > p:last-of-type {
    margin-bottom: 0;
}

.paige-figure,
.paige-gallery,
.paige-image,
.paige-quote,
.paige-row-narrow:last-child,
.paige-row-wide,
.paige-video,
#paige-content > *,
table {
    margin-bottom: 1rem;
}

.paige-header-link:focus,
.paige-header-link:hover,
:hover > .paige-header-link,
:target > .paige-header-link {
    opacity: 1;
}




    /* Background */ .bg { color: #c9d1d9; background-color: var(--bs-body-bg); }
/* PreWrapper */ .chroma { color: #c9d1d9; background-color: var(--bs-body-bg); }
/* Other */ .chroma .x {  }
/* Error */ .chroma .err { color: #f85149 }
/* CodeLine */ .chroma .cl {  }
/* LineLink */ .chroma .lnlinks { outline: none; text-decoration: none; color: inherit }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; }
/* LineHighlight */ .chroma .hl { background-color: #4f4f4d }
/* LineNumbersTable */ .chroma .lnt { white-space: pre; user-select: none; margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #64686c }
/* LineNumbers */ .chroma .ln { white-space: pre; user-select: none; margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #6e7681 }
/* Line */ .chroma .line { display: flex; }
/* Keyword */ .chroma .k { color: #ff7b72 }
/* KeywordConstant */ .chroma .kc { color: #79c0ff }
/* KeywordDeclaration */ .chroma .kd { color: #ff7b72 }
/* KeywordNamespace */ .chroma .kn { color: #ff7b72 }
/* KeywordPseudo */ .chroma .kp { color: #79c0ff }
/* KeywordReserved */ .chroma .kr { color: #ff7b72 }
/* KeywordType */ .chroma .kt { color: #ff7b72 }
/* Name */ .chroma .n {  }
/* NameAttribute */ .chroma .na {  }
/* NameBuiltin */ .chroma .nb {  }
/* NameBuiltinPseudo */ .chroma .bp {  }
/* NameClass */ .chroma .nc { color: #f0883e; font-weight: bold }
/* NameConstant */ .chroma .no { color: #79c0ff; font-weight: bold }
/* NameDecorator */ .chroma .nd { color: #d2a8ff; font-weight: bold }
/* NameEntity */ .chroma .ni { color: #ffa657 }
/* NameException */ .chroma .ne { color: #f0883e; font-weight: bold }
/* NameFunction */ .chroma .nf { color: #d2a8ff; font-weight: bold }
/* NameFunctionMagic */ .chroma .fm {  }
/* NameLabel */ .chroma .nl { color: #79c0ff; font-weight: bold }
/* NameNamespace */ .chroma .nn { color: #ff7b72 }
/* NameOther */ .chroma .nx {  }
/* NameProperty */ .chroma .py { color: #79c0ff }
/* NameTag */ .chroma .nt { color: #7ee787 }
/* NameVariable */ .chroma .nv { color: #79c0ff }
/* NameVariableClass */ .chroma .vc {  }
/* NameVariableGlobal */ .chroma .vg {  }
/* NameVariableInstance */ .chroma .vi {  }
/* NameVariableMagic */ .chroma .vm {  }
/* Literal */ .chroma .l { color: #a5d6ff }
/* LiteralDate */ .chroma .ld { color: #79c0ff }
/* LiteralString */ .chroma .s { color: #a5d6ff }
/* LiteralStringAffix */ .chroma .sa { color: #79c0ff }
/* LiteralStringBacktick */ .chroma .sb { color: #a5d6ff }
/* LiteralStringChar */ .chroma .sc { color: #a5d6ff }
/* LiteralStringDelimiter */ .chroma .dl { color: #79c0ff }
/* LiteralStringDoc */ .chroma .sd { color: #a5d6ff }
/* LiteralStringDouble */ .chroma .s2 { color: #a5d6ff }
/* LiteralStringEscape */ .chroma .se { color: #79c0ff }
/* LiteralStringHeredoc */ .chroma .sh { color: #79c0ff }
/* LiteralStringInterpol */ .chroma .si { color: #a5d6ff }
/* LiteralStringOther */ .chroma .sx { color: #a5d6ff }
/* LiteralStringRegex */ .chroma .sr { color: #79c0ff }
/* LiteralStringSingle */ .chroma .s1 { color: #a5d6ff }
/* LiteralStringSymbol */ .chroma .ss { color: #a5d6ff }
/* LiteralNumber */ .chroma .m { color: #a5d6ff }
/* LiteralNumberBin */ .chroma .mb { color: #a5d6ff }
/* LiteralNumberFloat */ .chroma .mf { color: #a5d6ff }
/* LiteralNumberHex */ .chroma .mh { color: #a5d6ff }
/* LiteralNumberInteger */ .chroma .mi { color: #a5d6ff }
/* LiteralNumberIntegerLong */ .chroma .il { color: #a5d6ff }
/* LiteralNumberOct */ .chroma .mo { color: #a5d6ff }
/* Operator */ .chroma .o { color: #ff7b72; font-weight: bold }
/* OperatorWord */ .chroma .ow { color: #ff7b72; font-weight: bold }
/* Punctuation */ .chroma .p {  }
/* Comment */ .chroma .c { color: #8b949e; font-style: italic }
/* CommentHashbang */ .chroma .ch { color: #8b949e; font-style: italic }
/* CommentMultiline */ .chroma .cm { color: #8b949e; font-style: italic }
/* CommentSingle */ .chroma .c1 { color: #8b949e; font-style: italic }
/* CommentSpecial */ .chroma .cs { color: #8b949e; font-weight: bold; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #8b949e; font-weight: bold; font-style: italic }
/* CommentPreprocFile */ .chroma .cpf { color: #8b949e; font-weight: bold; font-style: italic }
/* Generic */ .chroma .g {  }
/* GenericDeleted */ .chroma .gd { color: #ffa198; background-color: #490202 }
/* GenericEmph */ .chroma .ge { font-style: italic }
/* GenericError */ .chroma .gr { color: #ffa198 }
/* GenericHeading */ .chroma .gh { color: #79c0ff; font-weight: bold }
/* GenericInserted */ .chroma .gi { color: #56d364; background-color: #0f5323 }
/* GenericOutput */ .chroma .go { color: #8b949e }
/* GenericPrompt */ .chroma .gp { color: #8b949e }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { color: #79c0ff }
/* GenericTraceback */ .chroma .gt { color: #ff7b72 }
/* GenericUnderline */ .chroma .gl { text-decoration: underline }
/* TextWhitespace */ .chroma .w { color: #6e7681 }



@media (prefers-reduced-motion: reduce) {
    .paige-header-link {
        transition: none;
    }
}




</style>


    
</head>

    <body>

        

        <div class="container">
            <div class="row">
                <div class="col mt-3" id="paige-site">
                    

                    














    





    
        
    



    <header id="paige-site-header">
        

        
            <div class="display-1 fw-bold  mb-2  paige-row-wide text-center" id="paige-site-title">HockenHome</div>
        

        
            <div class="lead paige-row-wide text-center" id="paige-site-description">Welcome to HockenHome, Brian&rsquo;s site for project updates, writings, and ideas.</div>
        

        
            
                

                
                    
                        
                    
                
                    
                
                    
                        
                    
                

                

                <nav aria-label="Menu" class="paige-row-wide" id="paige-menu">
                    <ul class="align-items-center justify-content-center nav  nav-pills ">
                        
                            
                            
                            
                            
                            

                            <li class="nav-item">
                                <a  class=" nav-link " href="/categories/" >Categories</a>
                            </li>
                        
                            
                            
                            
                            
                            

                            <li class="nav-item">
                                <a  class=" nav-link " href="/" >Home</a>
                            </li>
                        
                            
                            
                            
                            
                            

                            <li class="nav-item">
                                <a  class=" nav-link " href="/tags/" >Tags</a>
                            </li>
                        
                    </ul>
                </nav>
            
        

        
            <nav aria-label="Breadcrumbs" class="paige-row-wide" id="paige-breadcrumbs">
                <div class="d-flex justify-content-center">
                    <ol class="breadcrumb mb-0">
                        

                        

                        
                            

                            

                            <li class="breadcrumb-item"><a href="/">Home</a></li>
                        
                    </ol>
                </div>
            </nav>
        

        
    </header>


                    




















    



    
        
    




<article class="paige-kind-page paige-published" id="paige-page">
    <div class="align-items-center d-flex flex-column">
        






















    <header class="mw-100" id="paige-page-header">
        <div class="align-items-center d-flex flex-column">
            

            
                
                    <h1 class="fw-bold" id="paige-page-title">The Answering Machine</h1>
                
            

            

            
                <div id="paige-metadata">
                    
                        <p class=" paige-row-narrow  text-center  text-secondary " id="paige-keywords">
                            <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/ai/">AI</a> Â· <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/analytics/">Analytics</a> Â· <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/aws-lambda/">AWS Lambda</a> Â· <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/data-visualization/">Data Visualization</a> Â· <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/nlp/">NLP</a> Â· <a class="link-secondary paige-keyword paige-keyword-category" href="/categories/project-overview/">Project Overview</a> Â· <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/python/">Python</a> Â· <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/rapid-prototyping/">Rapid Prototyping</a> Â· <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/react/">React</a> Â· <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/serverless/">Serverless</a> Â· <a class="link-secondary paige-keyword paige-keyword-tag" href="/tags/system-design/">System Design</a>
                        </p>
                    

                    

                    

                    
                        <p class="paige-row-narrow text-center text-secondary" id="paige-date">
                            <time datetime="2019-07-03">July 3, 2019</time>
                        </p>
                    

                    
                </div>
            

            

            
                <div class="paige-row-wide" id="paige-toc">
                    <div class="border pe-3 ps-3 pt-3 rounded">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#how-to">How-to</a>
      <ul>
        <li><a href="#asking-questions">Asking questions</a></li>
        <li><a href="#forming-concepts">Forming Concepts</a></li>
      </ul>
    </li>
    <li><a href="#architecture">Architecture</a></li>
  </ul>
</nav>
                    </div>
                </div>
            

            
        </div>
    </header>



        
            <main class="mw-100" id="paige-content"><p>The Answering Machine is a proof-of-concept system that I built using <strong>pre-LLM</strong> natural language processing (NLP), specifically NLTK, to produce answers to questions asked about data in plain English.</p>
<p>Looking back, this project was a great insight into what LLMs immediately allowed that was incredibly difficult before.  This project was several months of work that the openAI sdk would probably have allowed in a few weeks - and that few weeks would have been mostly frontend design and a bit of prompting.</p>
<p><strong>Try it here:</strong> <a href="http://voicequery-dev.s3-website-us-west-2.amazonaws.com/">http://voicequery-dev.s3-website-us-west-2.amazonaws.com/</a>
<strong>Github:</strong> <a href="https://github.com/hockenmaier/voicequery">https://github.com/hockenmaier/voicequery</a></p>
<p>The system uses natural language processing (NLP) to produce answers to questions asked about data in plain English.</p>
<p>It is designed with simplicity in mindâupload any columnar dataset and start asking questions and getting answers. It uses advanced NLP algorithms to make assumptions about what data you&rsquo;re asking about and lets you correct those assumptions for follow-up questions if they&rsquo;re wrong.</p>
<p>It is built entirely out of serverless components, which means there is no cost to maintain or run it other than the traffic the system receives.</p>
<h2 id="how-to">How-to<a aria-label="Link to this section" class="paige-header-link" href="#how-to"></a></h2>
<p>On a desktop or tablet, click the link in the header to navigate to the Answering Machine. For now, it isn&rsquo;t optimized for smartphone-sized screens.</p>
<p>In order to use the Answering Machine, you can either select one of the existing datasets, such as &ldquo;HR Activity Sample,&rdquo; or upload one of your own using the homepage of the site:</p>
<div style="text-align: center; margin-bottom: 1rem;">
    




























    



    



    





    



    





    



    






















<img  alt="Answering Machine homepage"   crossorigin="anonymous"    referrerpolicy="no-referrer"  src="http://localhost:1313/images/answering_machine_uploads.png"   style="height: auto; max-width: 720px; width: 100%"   >


    
</div>

<p>To upload your own, click in the upload area or just drag a file straight from your desktop. For now, use CSV data files. Excel and other spreadsheet programs can easily save data in the CSV format using the &ldquo;File &gt; Save As&rdquo; or similar option in the menu. Each file needs a unique name.</p>
<p>When you hit the upload button, the site may not appear to change until the file is uploaded, at which point you&rsquo;ll see it appear in the box labeled &ldquo;Ask Your Data Anything&rdquo; below. Click on your file to start using it with the Answering Machine, or click the red trash can icon to delete it.</p>
<p>There are no user accounts in this system yet, so the data you upload might be seen by other users using the system. Try not to use sensitive data for now.</p>
<h3 id="asking-questions">Asking questions<a aria-label="Link to this section" class="paige-header-link" href="#asking-questions"></a></h3>
<p>When you enter a dataset, you&rsquo;ll see a view that presents you with quite a bit of information:</p>
<div style="text-align: center; margin-bottom: 1rem;">
    




























    



    



    







    





    



    






















<img  alt="Answering Machine main view"   crossorigin="anonymous"    referrerpolicy="no-referrer"  src="http://localhost:1313/images/answering_machine_hr.png"   style="height: auto; width: 100%"   >


    
</div>

<p>The only part you need to focus on right now is the information panel. This panel lists out all the fields (columns), data types of those fields, and some sample data from a few records in your dataset:</p>
<div style="text-align: center; margin-bottom: 1rem;">
    




























    



    



    





    



    





    



    






















<img  alt="Answering Machine info panel"   crossorigin="anonymous"    referrerpolicy="no-referrer"  src="http://localhost:1313/images/answering_machine_info.png"   style="height: auto; max-width: 720px; width: 100%"   >


    
</div>

<p>You can use this panel to start to formulate questions you might have about the data. If you see number values, you might ask about averages, maximums, or other math that might otherwise take some time to calculate. If you see a date, you can ask questions about the data in certain time periods.</p>
<p>Many datasets also contain fields that only have a few specific allowed values. When the Answering Machine sees fewer than 15 unique values in any field, the data type will be a &ldquo;List&rdquo; and it lists them right out under the sample values table. You can use this type of value to ask questions about records containing those specific values. For example, in the HR dataset, you might only be interested in data where the &ldquo;Education&rdquo; field&rsquo;s value is &ldquo;High School.&rdquo;</p>
<p>Now look to the query bar to start asking your data questions:</p>
<div style="text-align: center; margin-bottom: 1rem;">
    




























    



    



    





    



    





    



    






















<img  alt="Answering Machine query bar"   crossorigin="anonymous"    referrerpolicy="no-referrer"  src="http://localhost:1313/images/answering_machine_query.png"   style="height: auto; max-width: 720px; width: 100%"   >


    
</div>

<p>The types of questions that will currently be automatically detected and answered are:</p>
<ul>
<li>Counts of records where certain conditions are true</li>
<li>Math questions such as averages, medians, maximums, and minimums</li>
</ul>
<p>These types of questions can be made specific by using qualifying statements with prepositional phrases like &ldquo;in 2019&rdquo; or adjective phrases like &ldquo;male&rdquo; or &ldquo;entry-level.&rdquo;</p>
<p>Combining these two ideas, you can ask specific questions with any number of qualifiers, such as:<br>
<em>&ldquo;What was the median salary of male employees in the engineering department 5 years ago?&rdquo;</em></p>
<p>Upon hitting the &ldquo;Ask&rdquo; button (or hitting Enter), the Answering Machine will do its best to answer your question and will show you all of its work in this format:</p>
<div style="text-align: center; margin-bottom: 1rem;">
    




























    



    



    





    



    





    



    






















<img  alt="Answering Machine response"   crossorigin="anonymous"    referrerpolicy="no-referrer"  src="http://localhost:1313/images/answering_machine_answer.png"   style="height: auto; max-width: 720px; width: 100%"   >


    
</div>

<p>The last line in the response is the Answering Machine&rsquo;s answer. In this case, it is telling you the metric you asked for with all your stipulations is <strong>6871.6 dollars.</strong></p>
<p>Moving up, you see a series of assessments that the Answering Machine has made in order to filter and identify the data you are asking about. Statements like &ldquo;Best auto-detected Numeric Subject Found: salary with column: Compensation (Monthly)&rdquo; provide a glimpse into one of the Answering Machine&rsquo;s most advanced features, which uses a selection of NLP techniques to compare words and phrases that are similar in meaning, ultimately matching things you are asking about to fields and values that actually exist in your database.</p>
<p>At the very top of the response is how the Answering Machine&rsquo;s nested grammar parsing logic actually parsed your question, with some specific pieces color-coded:</p>
<ul>
<li><strong>Green</strong> chunks indicate &ldquo;subjects&rdquo; that were detected. Subjects are what the Answering Machine thinks you&rsquo;re asking &ldquo;about.&rdquo; These should represent both the main subject and other supporting subjects in your question.</li>
<li><strong>Purple</strong> chunks are conditions. These are the things that the Answering Machine thinks you are trying to use to &ldquo;specify&rdquo; or filter data.</li>
</ul>
<p>Now that your question is answered, you might notice that some new green and purple colored bubbles have appeared in the sections of your screen labeled &ldquo;New Subjects&rdquo; and &ldquo;New Conditions.&rdquo; We&rsquo;ll call these &ldquo;lexicon&rdquo;:</p>
<div style="text-align: center; margin-bottom: 1rem;">
    




























    



    



    





    



    





    



    






















<img  alt="Answering Machine subjects and conditions"   crossorigin="anonymous"    referrerpolicy="no-referrer"  src="http://localhost:1313/images/answering_machine_lexicon.png"   style="height: auto; max-width: 400px; width: 100%"   >


    
</div>

<h3 id="forming-concepts">Forming Concepts<a aria-label="Link to this section" class="paige-header-link" href="#forming-concepts"></a></h3>
<p>If the Answering Machine already understood what you were asking and successfully matched it to fields and values in your data, you don&rsquo;t have to do anything with these. But often you will be using domain-specific lexicon, or the auto-matching algorithm simply won&rsquo;t pick the correct value. These situations are what concepts are for.</p>
<p>To create a concept, click and drag on the green or purple &ldquo;lexicon&rdquo; bubble and move it out into the blank middle area of the screen. Then click and drag the field or field value from the info-panel at the top of the screen and drop it right on top of that bubble. You&rsquo;ll see both the data bubble and the lexicon bubble included in a larger gray bubble, which represents the concept:</p>
<div style="text-align: center; margin-bottom: 1rem;">
    




























    



    



    





    



    





    



    






















<img  alt="Answering Machine concept"   crossorigin="anonymous"    referrerpolicy="no-referrer"  src="http://localhost:1313/images/answering_machine_concept.png"   style="height: auto; max-width: 200px; width: 100%"   >


    
</div>

<p>You can add more lexicon bubbles to this concept if they mean the same thing, but you can only use one data bubble.</p>
<p>Concepts override the Answering Machine&rsquo;s auto-matching logic. If you ask another question containing a subject or condition that is now matched by a user to a data value, that data value will be used instead of the auto-match. If the concept isn&rsquo;t working well, you can delete it by dragging all of the nested bubbles out of it either into the blank middle area or into the colored panel they originally came from.</p>
<p>Feel free to play around with new datasets and questions, and use the contact section of this site if you have comments or questions. When you ask questions or create/modify concepts, that data will automatically be saved to the server in real-time. You can close the page anytime and come back to your dataset to keep asking questions.</p>
<p>Remember that there are no user accounts, meaning you can share your dataset and work in tandem with others! But again, please do not upload sensitive data to this proof-of-concept tool as it will be available for other users to see and query.</p>
<h2 id="architecture">Architecture<a aria-label="Link to this section" class="paige-header-link" href="#architecture"></a></h2>
<p>The Answering Machine is a purely &ldquo;serverless&rdquo; application, meaning that there is no server hosting the various components of the application until those components are needed by a user. This is true for the database, the file storage, the static website, the backend compute, and the API orchestration.</p>
<p>For the cloud nerds out there, <a href="https://martinfowler.com/articles/serverless.html">here is a great article</a> by Martin Fowler on what exactly &ldquo;serverless&rdquo; means, especially in terms of the backend compute portion, which is arguably the most valuable part of the application to be serverless. For reference, I am using Martin&rsquo;s 2nd definition of &ldquo;serverless&rdquo; here.</p>
<p>This is a high-level map of all of the components that make the Answering Machine work in its current (June 2020) state. The API gateways, CloudWatch events, and some triggers &ldquo;given for free&rdquo; by AWS are left out of this for readability:</p>
<div style="text-align: center; margin-bottom: 1rem;">
    




























    



    



    





    



    





    



    






















<img  alt="Serverless Architecture of the Answering Machine app"   crossorigin="anonymous"    referrerpolicy="no-referrer"  src="http://localhost:1313/images/answering_machine_architecture.png"   style="height: auto; max-width: 720px; width: 100%"   >


    
</div>

<p>The full suite of lambdas and persistent storage services that make up the Answering Machine.</p>
</main>
        

        









    

    



    <footer class="mw-100" id="paige-page-footer">
        

        

        
            <div id="paige-siblings">
                
                    <div class="paige-row-narrow text-center text-secondary" id="paige-next"><a class="link-secondary" href="http://localhost:1313/land-war/">Land War</a> &rsaquo;</div>
                

                
                    <div class="paige-row-narrow text-center text-secondary" id="paige-prev">&lsaquo; <a class="link-secondary" href="http://localhost:1313/human-joystick/">Human Joystick VR</a></div>
                
            </div>
        

        
    </footer>


    </div>
</article>










    
    



    



    



    



    



    



    



    



    



    






                    












    





    <footer id="paige-site-footer">
        

        

        

        
            <p class="paige-row-narrow text-center text-secondary" id="paige-credit">Â© 2025 Brian Hockenmaier. All rights reserved.</p>
        

        
    </footer>



                    
                </div>
            </div>
        </div>

        















    
    
    


<script  crossorigin="anonymous"   defer  integrity="sha256-lX&#43;ULWAvPVhH6ZIQfjfpD61jOifETLc9RAMCMqtgfeQ="   referrerpolicy="no-referrer"  src="/js/paige/bootstrap/bootstrap.bundle.min.957f942d602f3d5847e992107e37e90fad633a27c44cb73d44030232ab607de4.js" ></script>







    



    



    



    



    



    



    



    



    



    



    



    



    



    



    





<noscript>JavaScript is required</noscript>


        
        
<style>
  #ballfallCanvas {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 9999;
    pointer-events: none;
  }
</style>

<script src="/js/matter.min.js"></script>
<script src="/js/matter-wrap.min.js"></script>

<script>
window.addEventListener('load', function() {
  const Engine = Matter.Engine,
        Render = Matter.Render,
        Runner = Matter.Runner,
        World  = Matter.World,
        Bodies = Matter.Bodies,
        Composite = Matter.Composite,
        Events = Matter.Events;

  Matter.use('matter-wrap');

  window.BallFall = {};

  const engine = Engine.create();
  engine.world.gravity.y = .75; 
  window.BallFall.engine = engine;
  window.BallFall.world = engine.world;

  
  const canvasEl = document.createElement('canvas');
  canvasEl.id = "ballfallCanvas";
  document.body.appendChild(canvasEl);

  const render = Render.create({
    engine: engine,
    canvas: canvasEl,
    options: {
      width: window.innerWidth,
      height: window.innerHeight,
      background: 'transparent',
      wireframes: false,
      pixelRatio: 1
    }
  });
  engine.timing.timeScale = 0.3;
  window.BallFall.render = render;
  Render.run(render);

  const runner = Runner.create({ isFixed: true, delta: 1000 / 60 });
  Runner.run(runner, engine);

  function resize() {
    render.options.width = window.innerWidth;
    render.options.height = window.innerHeight;
    canvasEl.width = window.innerWidth;
    canvasEl.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  
  let lastScrollY = window.scrollY;
  window.addEventListener('scroll', () => {
    const dy = window.scrollY - lastScrollY;
    Composite.translate(engine.world, { x: 0, y: -dy });
    lastScrollY = window.scrollY;
  });

  
  function addMediaColliders() {
    document.querySelectorAll('img, iframe').forEach(el => {
      const rect = el.getBoundingClientRect();
      if (rect.width < 1 || rect.height < 1) return;
      const cx = rect.left + rect.width / 2 + window.scrollX;
      const cy = rect.top + rect.height / 2 + window.scrollY;
      const box = Bodies.rectangle(cx, cy, rect.width, rect.height, {
        isStatic: true,
        render: { visible: false }
      });
      box.elRef = el;
      World.add(engine.world, box);
    });
  }
  addMediaColliders();

  function spawnBall() {
    const spawnX = window.scrollX + (window.innerWidth / 7);
    const spawnY = -window.scrollY;
    const ballRadius = 7;
    const ball = Bodies.circle(spawnX, spawnY, ballRadius, {
      restitution: 0.95,
      friction: 0.000,
      frictionAir: 0,
      render: { fillStyle: '#e6e6e6' },
      plugin: {
        wrap: {
          min: { x: 0, y: -999999 },
          max: { x: document.body.scrollWidth, y: 999999 }
        }
      },
      label: 'BallFallBall'
    });
    World.add(engine.world, ball);
  }

  setInterval(spawnBall, 5000);

  
  Events.on(engine, 'collisionStart', event => {
    event.pairs.forEach(pair => {
      [pair.bodyA, pair.bodyB].forEach(b => {
        if (b.elRef && b.elRef.tagName !== 'SPAN') {
          b.elRef.style.border = '1px dotted #6eff94';
        }
      });
    });
  });

  
  
  const ballPositionData = {};

  function removeBallsBelowPage() {
    const bodies = Composite.allBodies(engine.world);
    const pageBottom = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);
    bodies.forEach(body => {
      if (body.label === 'BallFallBall') {
        if (body.position.y > pageBottom) {
          World.remove(engine.world, body);
          delete ballPositionData[body.id];
        }
      }
    });
  }

  function removeStillBalls() {
    const bodies = Composite.allBodies(engine.world);
    bodies.forEach(body => {
      if (body.label === 'BallFallBall') {
        const prev = ballPositionData[body.id] || { x: body.position.x, y: body.position.y, stillCount: 0 };
        const dx = Math.abs(body.position.x - prev.x);
        const dy = Math.abs(body.position.y - prev.y);
        const threshold = 0.5; 

        if (dx < threshold && dy < threshold) {
          prev.stillCount++;
        } else {
          prev.stillCount = 0;
        }

        prev.x = body.position.x;
        prev.y = body.position.y;

        if (prev.stillCount >= 5) {
          World.remove(engine.world, body);
          delete ballPositionData[body.id];
        } else {
          ballPositionData[body.id] = prev;
        }
      }
    });
  }

  
  setInterval(() => {
    removeBallsBelowPage();
    removeStillBalls();
  }, 1000);

  window.dispatchEvent(new Event('BallFallBaseReady'));
});
</script>

        


<script>
    window.addEventListener('BallFallBaseReady', function() {
      
      if (window.innerWidth < 720) {  
            
            window.dispatchEvent(new Event('BallFallTextReady'));
            return;
        }

      const { engine, world } = window.BallFall || {};
      if (!engine || !world) return;
  
      const Bodies = Matter.Bodies;
      const World = Matter.World;
      const Events = Matter.Events;
  
      function traceOutline(alphaData, w, h) {
        const edges = [];
        function alphaAt(x, y) {
          if (x < 0 || y < 0 || x >= w || y >= h) return 0;
          return alphaData[y * w + x];
        }
        for (let y = 0; y < h - 1; y++) {
          for (let x = 0; x < w - 1; x++) {
            const topLeft     = alphaAt(x,   y);
            const topRight    = alphaAt(x+1, y);
            const bottomLeft  = alphaAt(x,   y+1);
            const bottomRight = alphaAt(x+1, y+1);
            const squareIdx = (topLeft > 0 ? 8 : 0)
                            + (topRight > 0 ? 4 : 0)
                            + (bottomRight > 0 ? 2 : 0)
                            + (bottomLeft > 0 ? 1 : 0);

            if      (squareIdx === 1  || squareIdx === 14) edges.push({x, y: y+0.5}, {x: x+0.5, y: y+1});
            else if (squareIdx === 2  || squareIdx === 13) edges.push({x: x+0.5, y: y+1}, {x: x+1,   y: y+0.5});
            else if (squareIdx === 4  || squareIdx === 11) edges.push({x: x+0.5, y}, {x: x+1,   y: y+0.5});
            else if (squareIdx === 8  || squareIdx === 7)  edges.push({x, y: y+0.5}, {x: x+0.5, y});
            else if (squareIdx === 3  || squareIdx === 12) edges.push({x, y: y+0.5}, {x: x+1,   y: y+0.5});
            else if (squareIdx === 6  || squareIdx === 9)  edges.push({x: x+0.5, y}, {x: x+0.5, y: y+1});
          }
        }
        return edges;
      }

  
      
      function shrinkEdges(localPts, dist) {
        return localPts.map(pt => {
          const length = Math.hypot(pt.x, pt.y);
          if (length <= dist) {
            
            return { x: 0, y: 0 };
          }
          const s = (length - dist) / length;
          return { x: pt.x * s, y: pt.y * s };
        });
      }
  
      function wrapTextNodes(root) {
        const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, null, false);
        const textNodes = [];
        while (walker.nextNode()) textNodes.push(walker.currentNode);
        textNodes.forEach(node => {
          const text = node.nodeValue;
          if (!text.trim()) return;
          const parent = node.parentNode;
          if (!parent || ['SCRIPT','STYLE'].includes(parent.tagName)) return;
          const frag = document.createDocumentFragment();
          for (let char of text) {
            const span = document.createElement('span');
            span.textContent = char;
            frag.appendChild(span);
          }
          parent.replaceChild(frag, node);
        });
      }
      wrapTextNodes(document.body);
  
      function letterToBody(letterEl) {
        const rect = letterEl.getBoundingClientRect();
        if (rect.width < 1 || rect.height < 1) return null;
  
        const off = document.createElement('canvas');
        off.width = Math.ceil(rect.width);
        off.height = Math.ceil(rect.height);
        const ctx = off.getContext('2d');
  
        ctx.font = window.getComputedStyle(letterEl).font;
        ctx.fillStyle = '#000';
        ctx.textBaseline = 'top';
        ctx.fillText(letterEl.textContent, 0, 0);
  
        const imgData = ctx.getImageData(0, 0, off.width, off.height).data;
        const alphaData = [];
        for (let i = 3; i < imgData.length; i += 4) {
          alphaData.push(imgData[i]);
        }
  
        const edges = traceOutline(alphaData, off.width, off.height);
        if (!edges.length) return null;
  
        const shiftX = rect.left + window.scrollX;
        const shiftY = rect.top + window.scrollY;
        edges.forEach(pt => {
          pt.x += shiftX;
          pt.y += shiftY;
        });
  
        const minX = Math.min(...edges.map(pt => pt.x));
        const minY = Math.min(...edges.map(pt => pt.y));
        const maxX = Math.max(...edges.map(pt => pt.x));
        const maxY = Math.max(...edges.map(pt => pt.y));
        const centerX = (minX + maxX) / 2;
        const centerY = (minY + maxY) / 2;
  
        
        const localEdges = edges.map(pt => ({ x: pt.x - centerX, y: pt.y - centerY }));
        
        const shrunk = shrinkEdges(localEdges, 4);
  
        const body = Bodies.fromVertices(centerX, centerY, [shrunk], {
          isStatic: true,
          render: { visible: false }
        }, true);
  
        if (body) body.elRef = letterEl;
        return body;
      }
  
      const spans = document.querySelectorAll('span');
      spans.forEach(span => {
        const body = letterToBody(span);
        if (body) World.add(world, body);
      });
  
      Events.on(engine, 'collisionStart', evt => {
        evt.pairs.forEach(pair => {
          [pair.bodyA, pair.bodyB].forEach(b => {
            if (b.elRef && b.elRef.tagName === 'SPAN') {
              b.elRef.style.color = '#6eff94';
            }
          });
        });
      });
  
      window.dispatchEvent(new Event('BallFallTextReady'));
    });
  </script>
  
        


<script>
  window.addEventListener('BallFallBaseReady', function() {
    const {
      engine,
      world
    } = window.BallFall || {};
    if (!engine || !world) return;
  
    const Bodies = Matter.Bodies,
          World  = Matter.World;
  
    let firstClick = null;
  
    
    function isNonInteractable(target) {
      const clickableTags = ['A','BUTTON','INPUT','TEXTAREA','SELECT','LABEL'];
      return !clickableTags.includes(target.tagName);
    }
  
    document.addEventListener('click', e => {
      if (!isNonInteractable(e.target)) {
        return;
      }
  
      
      const clickX = e.pageX - window.scrollX;
      const clickY = e.pageY - window.scrollY;
  
      if (!firstClick) {
        firstClick = { x: clickX, y: clickY };
      } else {
        const dx = clickX - firstClick.x;
        const dy = clickY - firstClick.y;
        const length = Math.sqrt(dx*dx + dy*dy);
        const angle = Math.atan2(dy, dx);
        const midX = (firstClick.x + clickX) / 2;
        const midY = (firstClick.y + clickY) / 2;
  
        firstClick = null;
  
        
        const lineBody = Bodies.rectangle(midX, midY, length, 2, {
          isStatic: true,
          angle: angle,
          render: {
            fillStyle: '#956eff',
            strokeStyle: '#956eff',
            lineWidth: 1
          }
        });
        World.add(world, lineBody);
      }
    });
  });
  </script>
  
    </body>
</html>
