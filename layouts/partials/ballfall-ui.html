<!-- layouts/partials/ballfall-ui.html -->
<style>
    #ballfall-ui {
      position: fixed;
      top: 50px;
      left: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 10000;
      font-family: sans-serif;
    }
    .bfui-button {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid #555;
      color: #ddd;
      padding: 8px 12px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      transition: transform 0.1s ease;
    }
    .bfui-button:active {
      transform: scale(0.95);
    }
    .bfui-icon {
      margin-right: 6px;
    }
  
    /* Drop rate display */
    #bfui-drop-rate-label {
      font-size: 10px;
      color: #aaa;
    }
    #bfui-drop-rate-value {
      font-size: 10px;
      color: #fff;
      font-weight: bold;
    }
    #bfui-drop-rate-wrapper {
        display: flex;
        justify-content: center;
        text-align: center;
        width: 100%;
        gap: 5px;
        margin-bottom: 5px;
    }
    .bfui-clear-wrapper {
        display: flex;
        gap: 3px;
        width: 100%;
        
    }

    .bfui-half {
        flex: 1;
        font-size: 8px;
    }


  
    @media (max-width: 720px) {
      /* Hide text labels and move drop rate under the buttons */
      .bfui-button .bfui-label {
        display: none;
      }
      #bfui-drop-rate-wrapper {
        flex-direction: column;
        align-items: flex-start;
        margin-top: -5px;
      }
      #bfui-drop-rate-label {
        display: none;
      }
    }
  </style>
  
  <div id="ballfall-ui">
    <button class="bfui-button" id="increaseSpeedBtn">
      <span class="bfui-icon">ðŸ”¼</span>
      <span class="bfui-label">Increase Speed</span>
    </button>
    <button class="bfui-button" id="decreaseSpeedBtn">
      <span class="bfui-icon">ðŸ”½</span>
      <span class="bfui-label">Decrease Speed</span>
    </button>
    <div class="bfui-clear-wrapper">
        <button class="bfui-button bfui-half" id="clearLinesBtn">
            <span class="bfui-label">Clear Lines</span>
        </button>
        <button class="bfui-button bfui-half" id="clearBallsBtn">
            <span class="bfui-label">Clear Balls</span>
        </button>
    </div>
  
    <div id="bfui-drop-rate-wrapper">
      <span id="bfui-drop-rate-label">Drop Rate:</span>
      <span id="bfui-drop-rate-value">0</span>
    </div>
  </div>
  
  <script>
  (function(){
    const incBtn   = document.getElementById('increaseSpeedBtn');
    const decBtn   = document.getElementById('decreaseSpeedBtn');
    const clearLinesBtn = document.getElementById('clearLinesBtn');
    const clearBallsBtn = document.getElementById('clearBallsBtn');
    const dropRateValue = document.getElementById('bfui-drop-rate-value');
  
    function updateDropRateDisplay() {
        if (!window.BallFall) return;
        const interval = window.BallFall.spawnInterval;
        const bps = 1000 / interval; 
        if (bps < 1) {
            dropRateValue.textContent = `every ${(1 / bps).toFixed(1)}s`;
        } else {
            dropRateValue.textContent = `${bps.toFixed(1)}/s`;
        }
    }

  
    incBtn.addEventListener('click', () => {
      if (window.BallFall && window.BallFall.updateSpawnInterval) {
        const current = window.BallFall.spawnInterval;
        const newInterval = Math.max(1.09375, current / 2);
        window.BallFall.updateSpawnInterval(newInterval);
        updateDropRateDisplay();
      }
    });
  
    decBtn.addEventListener('click', () => {
      if (window.BallFall && window.BallFall.updateSpawnInterval) {
        const current = window.BallFall.spawnInterval;
        window.BallFall.updateSpawnInterval(current * 2);
        updateDropRateDisplay();
      }
    });
  
    clearLinesBtn.addEventListener('click', () => {
      if (window.BallFall && window.BallFall.clearLines) {
        window.BallFall.clearLines();
      }
    });

    clearBallsBtn.addEventListener('click', () => {
      if (window.BallFall && window.BallFall.clearBalls) {
        window.BallFall.clearBalls();
      }
    });
  
    // If spawnInterval changes elsewhere, poll occasionally or hook the same function
    setInterval(updateDropRateDisplay, 1000);
  })();
  </script>
  